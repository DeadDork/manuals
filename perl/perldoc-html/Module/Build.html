<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Module::Build - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="../static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="../static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="../index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="../index-overview.html">Overview</a>
                <li><a href="../index-tutorials.html">Tutorials</a>
                <li><a href="../index-faq.html">FAQs</a>
                <li><a href="../index-history.html">History / Changes</a>
                <li><a href="../index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="../index-language.html">Language</a>
                <li><a href="../index-functions.html">Functions</a>
                <li><a href="../perlop.html">Operators</a>
                <li><a href="../perlvar.html">Special Variables</a>
                <li><a href="../index-pragmas.html">Pragmas</a>
                <li><a href="../index-utilities.html">Utilities</a>
                <li><a href="../index-internals.html">Internals</a>
                <li><a href="../index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="../index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="../index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="../index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="../index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="../preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>Module::Build</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 16.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="../search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="../index.html">Home</a> &gt;
    
      
        <a href="../index-modules-M.html">Core modules (M)</a> &gt;
      
    
    Module::Build
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>Module::Build</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#GUIDE-TO-DOCUMENTATION">GUIDE TO DOCUMENTATION</a><li><a href="#ACTIONS">ACTIONS</a><li><a href="#OPTIONS">OPTIONS</a><ul><li><a href="#Command-Line-Options">Command Line Options</a><li><a href="#Default-Options-File-(_.modulebuildrc_)">Default Options File (_.modulebuildrc_)</a><li><a href="#Environment-variables">Environment variables</a></ul><li><a href="#INSTALL-PATHS">INSTALL PATHS</a><li><a href="#MOTIVATIONS">MOTIVATIONS</a><li><a href="#TO-DO">TO DO</a><li><a href="#AUTHOR">AUTHOR</a><li><a href="#COPYRIGHT">COPYRIGHT</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>Module::Build - Build and install Perl modules</p>
<a name="SYNOPSIS"></a><h1>SYNOPSIS</h1>
<p>Standard process for building &amp; installing modules:</p>
<pre class="verbatim"><ol><li>  perl Build.PL</li><li>  ./Build</li><li>  ./Build test</li><li>  ./Build install</li></ol></pre><p>Or, if you're on a platform (like DOS or Windows) that doesn't require
the "./" notation, you can do this:</p>
<pre class="verbatim"><ol><li>  <span class="w">perl</span> <span class="w">Build</span>.<span class="w">PL</span></li><li>  <span class="w">Build</span></li><li>  <span class="w">Build</span> <span class="w">test</span></li><li>  <span class="w">Build</span> <span class="w">install</span></li></ol></pre><a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p><code class="inline"><span class="w">Module::Build</span></code>
 is a system for building, testing, and installing
Perl modules.  It is meant to be an alternative to
<code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
.  Developers may alter the behavior of the
module through subclassing in a much more straightforward way than
with <code class="inline"><span class="w">MakeMaker</span></code>
.  It also does not require a <code class="inline"><span class="w">make</span></code>
 on your system
- most of the <code class="inline"><span class="w">Module::Build</span></code>
 code is pure-perl and written in a very
cross-platform way.  In fact, you don't even need a shell, so even
platforms like MacOS (traditional) can use it fairly easily.  Its only
prerequisites are modules that are included with perl 5.6.0, and it
works fine on perl 5.005 if you can install a few additional modules.</p>
<p>See <a href="#MOTIVATIONS">MOTIVATIONS</a> for more comparisons between <code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>

and <code class="inline"><span class="w">Module::Build</span></code>
.</p>
<p>To install <code class="inline"><span class="w">Module::Build</span></code>
, and any other module that uses
<code class="inline"><span class="w">Module::Build</span></code>
 for its installation process, do the following:</p>
<pre class="verbatim"><ol><li>  perl Build.PL       # 'Build.PL' script creates the 'Build' script</li><li>  ./Build             # Need ./ to ensure we're using this "Build" script</li><li>  ./Build test        # and not another one that happens to be in the PATH</li><li>  ./Build install</li></ol></pre><p>This illustrates initial configuration and the running of three
'actions'.  In this case the actions run are 'build' (the default
action), 'test', and 'install'.  Other actions defined so far include:</p>
<pre class="verbatim"><ol><li>  <span class="w">build</span>                          <span class="w">manifest</span></li><li>  <span class="w">clean</span>                          <span class="w">manifest_skip</span></li><li>  <span class="w">code</span>                           <span class="w">manpages</span></li><li>  <span class="w">config_data</span>                    <span class="w">pardist</span></li><li>  <span class="w">diff</span>                           <span class="w">ppd</span></li><li>  <span class="w">dist</span>                           <span class="w">ppmdist</span></li><li>  <span class="w">distcheck</span>                      <span class="w">prereq_data</span></li><li>  <span class="w">distclean</span>                      <span class="w">prereq_report</span></li><li>  <span class="w">distdir</span>                        <span class="w">pure_install</span></li><li>  <span class="w">distinstall</span>                    <span class="w">realclean</span></li><li>  <span class="w">distmeta</span>                       <span class="w">retest</span></li><li>  <span class="w">distsign</span>                       <span class="w">skipcheck</span></li><li>  <span class="w">disttest</span>                       <span class="w">test</span></li><li>  <span class="w">docs</span>                           <span class="w">testall</span></li><li>  <span class="w">fakeinstall</span>                    <span class="w">testcover</span></li><li>  <span class="w">help</span>                           <span class="w">testdb</span></li><li>  <span class="w">html</span>                           <span class="w">testpod</span></li><li>  <span class="w">install</span>                        <span class="w">testpodcoverage</span></li><li>  <span class="w">installdeps</span>                    <span class="w">versioninstall</span></li></ol></pre><p>You can run the 'help' action for a complete list of actions.</p>
<a name="GUIDE-TO-DOCUMENTATION"></a><h1>GUIDE TO DOCUMENTATION</h1>
<p>The documentation for <code class="inline"><span class="w">Module::Build</span></code>
 is broken up into sections:</p>
<ul>
<li><a name="General-Usage-(the-Module%3a%3aBuild-manpage)"></a><b>General Usage (<a href="../Module/Build.html">Module::Build</a>)</b>
<p>This is the document you are currently reading. It describes basic
usage and background information.  Its main purpose is to assist the
user who wants to learn how to invoke and control <code class="inline"><span class="w">Module::Build</span></code>

scripts at the command line.</p>
</li>
<li><a name="Authoring-Reference-(the-Module%3a%3aBuild%3a%3aAuthoring-manpage)"></a><b>Authoring Reference (<a href="../Module/Build/Authoring.html">Module::Build::Authoring</a>)</b>
<p>This document describes the structure and organization of
<code class="inline"><span class="w">Module::Build</span></code>
, and the relevant concepts needed by authors who are
writing <i>Build.PL</i> scripts for a distribution or controlling
<code class="inline"><span class="w">Module::Build</span></code>
 processes programmatically.</p>
</li>
<li><a name="API-Reference-(the-Module%3a%3aBuild%3a%3aAPI-manpage)"></a><b>API Reference (<a href="../Module/Build/API.html">Module::Build::API</a>)</b>
<p>This is a reference to the <code class="inline"><span class="w">Module::Build</span></code>
 API.</p>
</li>
<li><a name="Cookbook-(the-Module%3a%3aBuild%3a%3aCookbook-manpage)"></a><b>Cookbook (<a href="../Module/Build/Cookbook.html">Module::Build::Cookbook</a>)</b>
<p>This document demonstrates how to accomplish many common tasks.  It
covers general command line usage and authoring of <i>Build.PL</i>
scripts.  Includes working examples.</p>
</li>
</ul>
<a name="ACTIONS"></a><h1>ACTIONS</h1>
<p>There are some general principles at work here.  First, each task when
building a module is called an "action".  These actions are listed
above; they correspond to the building, testing, installing,
packaging, etc., tasks.</p>
<p>Second, arguments are processed in a very systematic way.  Arguments
are always key=value pairs.  They may be specified at <code class="inline"><span class="w">perl</span> <span class="w">Build</span>.<span class="w">PL</span></code>

time (i.e. <code class="inline">perl Build.PL destdir=/my/secret/place</code>), in which case
their values last for the lifetime of the <code class="inline"><span class="w">Build</span></code>
 script.  They may
also be specified when executing a particular action (i.e.
<code class="inline"><span class="w">Build</span> <span class="w">test</span> <span class="w">verbose</span>=<span class="n">1</span></code>
), in which case their values last only for the
lifetime of that command.  Per-action command line parameters take
precedence over parameters specified at <code class="inline"><span class="w">perl</span> <span class="w">Build</span>.<span class="w">PL</span></code>
 time.</p>
<p>The build process also relies heavily on the <code class="inline"><span class="w">Config</span>.<span class="w">pm</span></code>
 module.
If the user wishes to override any of the
values in <code class="inline"><span class="w">Config</span>.<span class="w">pm</span></code>
, she may specify them like so:</p>
<pre class="verbatim"><ol><li>  perl Build.PL --config cc=gcc --config ld=gcc</li></ol></pre><p>The following build actions are provided by default.</p>
<ul>
<li><a name="build"></a><b>build</b>
<p>[version 0.01]</p>
<p>If you run the <code class="inline"><span class="w">Build</span></code>
 script without any arguments, it runs the
<code class="inline"><span class="w">build</span></code>
 action, which in turn runs the <code class="inline"><span class="w">code</span></code>
 and <code class="inline"><span class="w">docs</span></code>
 actions.</p>
<p>This is analogous to the <code class="inline"><span class="w">MakeMaker</span></code>
 <i>make all</i> target.</p>
</li>
<li><a name="clean"></a><b>clean</b>
<p>[version 0.01]</p>
<p>This action will clean up any files that the build process may have
created, including the <code class="inline"><span class="w">blib</span>/</code>
 directory (but not including the
<code class="inline"><span class="w">_build</span>/</code>
 directory and the <code class="inline"><span class="w">Build</span></code>
 script itself).</p>
</li>
<li><a name="code"></a><b>code</b>
<p>[version 0.20]</p>
<p>This action builds your code base.</p>
<p>By default it just creates a <code class="inline"><span class="w">blib</span>/</code>
 directory and copies any <code class="inline">.pm</code>
and <code class="inline">.pod</code> files from your <code class="inline"><span class="w">lib</span>/</code>
 directory into the <code class="inline"><span class="w">blib</span>/</code>

directory.  It also compiles any <code class="inline">.xs</code> files from <code class="inline"><span class="w">lib</span>/</code>
 and places
them in <code class="inline"><span class="w">blib</span>/</code>
.  Of course, you need a working C compiler (probably
the same one that built perl itself) for the compilation to work
properly.</p>
<p>The <code class="inline"><span class="w">code</span></code>
 action also runs any <code class="inline">.PL</code> files in your <i>lib/</i>
directory.  Typically these create other files, named the same but
without the <code class="inline">.PL</code> ending.  For example, a file <i>lib/Foo/Bar.pm.PL</i>
could create the file <i>lib/Foo/Bar.pm</i>.  The <code class="inline">.PL</code> files are
processed first, so any <code class="inline">.pm</code> files (or other kinds that we deal
with) will get copied correctly.</p>
</li>
<li><a name="config_data"></a><b>config_data</b>
<p>[version 0.26]</p>
<p>...</p>
</li>
<li><a name="diff"></a><b>diff</b>
<p>[version 0.14]</p>
<p>This action will compare the files about to be installed with their
installed counterparts.  For .pm and .pod files, a diff will be shown
(this currently requires a 'diff' program to be in your PATH).  For
other files like compiled binary files, we simply report whether they
differ.</p>
<p>A <code class="inline"><span class="w">flags</span></code>
 parameter may be passed to the action, which will be passed
to the 'diff' program.  Consult your 'diff' documentation for the
parameters it will accept - a good one is <code class="inline">-u</code>
:</p>
<pre class="verbatim"><ol><li>  ./Build diff flags=-u</li></ol></pre></li>
<li><a name="dist"></a><b>dist</b>
<p>[version 0.02]</p>
<p>This action is helpful for module authors who want to package up their
module for source distribution through a medium like CPAN.  It will create a
tarball of the files listed in <i>MANIFEST</i> and compress the tarball using
GZIP compression.</p>
<p>By default, this action will use the <code class="inline"><span class="w">Archive::Tar</span></code>
 module. However, you can
force it to use binary "tar" and "gzip" executables by supplying an explicit
<code class="inline"><span class="w">tar</span></code>
 (and optional <code class="inline"><span class="w">gzip</span></code>
) parameter:</p>
<pre class="verbatim"><ol><li>  ./Build dist --tar C:\path\to\tar.exe --gzip C:\path\to\zip.exe</li></ol></pre></li>
<li><a name="distcheck"></a><b>distcheck</b>
<p>[version 0.05]</p>
<p>Reports which files are in the build directory but not in the
<i>MANIFEST</i> file, and vice versa.  (See <a href="http://search.cpan.org/perldoc/manifest">manifest</a> for details.)</p>
</li>
<li><a name="distclean"></a><b>distclean</b>
<p>[version 0.05]</p>
<p>Performs the 'realclean' action and then the 'distcheck' action.</p>
</li>
<li><a name="distdir"></a><b>distdir</b>
<p>[version 0.05]</p>
<p>Creates a "distribution directory" named <code class="inline"><span class="i">$dist_name</span>-<span class="i">$dist_version</span></code>

(if that directory already exists, it will be removed first), then
copies all the files listed in the <i>MANIFEST</i> file to that directory.
This directory is what the distribution tarball is created from.</p>
</li>
<li><a name="distinstall"></a><b>distinstall</b>
<p>[version 0.37]</p>
<p>Performs the 'distdir' action, then switches into that directory and runs a
<code class="inline"><span class="w">perl</span> <span class="w">Build</span>.<span class="w">PL</span></code>
, followed by the 'build' and 'install' actions in that
directory.  Use PERL_MB_OPT or <i>.modulebuildrc</i> to set options that should be
applied during subprocesses</p>
</li>
<li><a name="distmeta"></a><b>distmeta</b>
<p>[version 0.21]</p>
<p>Creates the <i>META.yml</i> file that describes the distribution.</p>
<p><i>META.yml</i> is a file containing various bits of <i>metadata</i> about the
distribution.  The metadata includes the distribution name, version,
abstract, prerequisites, license, and various other data about the
distribution.  This file is created as <i>META.yml</i> in a simplified YAML format.</p>
<p><i>META.yml</i> file must also be listed in <i>MANIFEST</i> - if it's not, a
warning will be issued.</p>
<p>The current version of the <i>META.yml</i> specification can be found
on CPAN as <a href="../CPAN/Meta/Spec.html">CPAN::Meta::Spec</a>.</p>
</li>
<li><a name="distsign"></a><b>distsign</b>
<p>[version 0.16]</p>
<p>Uses <code class="inline"><span class="w">Module::Signature</span></code>
 to create a SIGNATURE file for your
distribution, and adds the SIGNATURE file to the distribution's
MANIFEST.</p>
</li>
<li><a name="disttest"></a><b>disttest</b>
<p>[version 0.05]</p>
<p>Performs the 'distdir' action, then switches into that directory and runs a
<code class="inline"><span class="w">perl</span> <span class="w">Build</span>.<span class="w">PL</span></code>
, followed by the 'build' and 'test' actions in that directory.
Use PERL_MB_OPT or <i>.modulebuildrc</i> to set options that should be applied
during subprocesses</p>
</li>
<li><a name="docs"></a><b>docs</b>
<p>[version 0.20]</p>
<p>This will generate documentation (e.g. Unix man pages and HTML
documents) for any installable items under <b>blib/</b> that
contain POD.  If there are no <code class="inline"><span class="w">bindoc</span></code>
 or <code class="inline"><span class="w">libdoc</span></code>
 installation
targets defined (as will be the case on systems that don't support
Unix manpages) no action is taken for manpages.  If there are no
<code class="inline"><span class="w">binhtml</span></code>
 or <code class="inline"><span class="w">libhtml</span></code>
 installation targets defined no action is
taken for HTML documents.</p>
</li>
<li><a name="fakeinstall"></a><b>fakeinstall</b>
<p>[version 0.02]</p>
<p>This is just like the <code class="inline"><span class="w">install</span></code>
 action, but it won't actually do
anything, it will just report what it <i>would</i> have done if you had
actually run the <code class="inline"><span class="w">install</span></code>
 action.</p>
</li>
<li><a name="help"></a><b>help</b>
<p>[version 0.03]</p>
<p>This action will simply print out a message that is meant to help you
use the build process.  It will show you a list of available build
actions too.</p>
<p>With an optional argument specifying an action name (e.g. <code class="inline"><span class="w">Build</span> <span class="w">help</span>
<span class="w">test</span></code>
), the 'help' action will show you any POD documentation it can
find for that action.</p>
</li>
<li><a name="html"></a><b>html</b>
<p>[version 0.26]</p>
<p>This will generate HTML documentation for any binary or library files
under <b>blib/</b> that contain POD.  The HTML documentation will only be
installed if the install paths can be determined from values in
<code class="inline"><span class="w">Config</span>.<span class="w">pm</span></code>
.  You can also supply or override install paths on the
command line by specifying <code class="inline"><span class="w">install_path</span></code>
 values for the <code class="inline"><span class="w">binhtml</span></code>

and/or <code class="inline"><span class="w">libhtml</span></code>
 installation targets.</p>
</li>
<li><a name="install"></a><b>install</b>
<p>[version 0.01]</p>
<p>This action will use <code class="inline"><span class="w">ExtUtils::Install</span></code>
 to install the files from
<code class="inline"><span class="w">blib</span>/</code>
 into the system.  See <a href="#INSTALL-PATHS">INSTALL PATHS</a>
for details about how Module::Build determines where to install
things, and how to influence this process.</p>
<p>If you want the installation process to look around in <code class="inline"><span class="i">@INC</span></code>
 for
other versions of the stuff you're installing and try to delete it,
you can use the <code class="inline"><span class="w">uninst</span></code>
 parameter, which tells <code class="inline"><span class="w">ExtUtils::Install</span></code>
 to
do so:</p>
<pre class="verbatim"><ol><li>  ./Build install uninst=1</li></ol></pre><p>This can be a good idea, as it helps prevent multiple versions of a
module from being present on your system, which can be a confusing
situation indeed.</p>
</li>
<li><a name="installdeps"></a><b>installdeps</b>
<p>[version 0.36]</p>
<p>This action will use the <code class="inline"><span class="w">cpan_client</span></code>
 parameter as a command to install
missing prerequisites.  You will be prompted whether to install
optional dependencies.</p>
<p>The <code class="inline"><span class="w">cpan_client</span></code>
 option defaults to 'cpan' but can be set as an option or in
<i>.modulebuildrc</i>.  It must be a shell command that takes a list of modules to
install as arguments (e.g. 'cpanp -i' for CPANPLUS).  If the program part is a
relative path (e.g. 'cpan' or 'cpanp'), it will be located relative to the perl
program that executed Build.PL.</p>
<pre class="verbatim"><ol><li>  /opt/perl/5.8.9/bin/perl Build.PL</li><li>  ./Build installdeps --cpan_client 'cpanp -i'</li><li>  # installs to 5.8.9</li></ol></pre></li>
<li><a name="manifest"></a><b>manifest</b>
<p>[version 0.05]</p>
<p>This is an action intended for use by module authors, not people
installing modules.  It will bring the <i>MANIFEST</i> up to date with the
files currently present in the distribution.  You may use a
<i>MANIFEST.SKIP</i> file to exclude certain files or directories from
inclusion in the <i>MANIFEST</i>.  <i>MANIFEST.SKIP</i> should contain a bunch
of regular expressions, one per line.  If a file in the distribution
directory matches any of the regular expressions, it won't be included
in the <i>MANIFEST</i>.</p>
<p>The following is a reasonable <i>MANIFEST.SKIP</i> starting point, you can
add your own stuff to it:</p>
<pre class="verbatim"><ol><li>  ^_build</li><li>  ^Build$</li><li>  ^blib</li><li>  ~$</li><li>  \.bak$</li><li>  ^MANIFEST\.SKIP$</li><li>  CVS</li></ol></pre><p>See the <a href="http://search.cpan.org/perldoc/distcheck">distcheck</a> and <a href="http://search.cpan.org/perldoc/skipcheck">skipcheck</a> actions if you want to find out
what the <code class="inline"><span class="w">manifest</span></code>
 action would do, without actually doing anything.</p>
</li>
<li><a name="manifest_skip"></a><b>manifest_skip</b>
<p>[version 0.3608]</p>
<p>This is an action intended for use by module authors, not people
installing modules.  It will generate a boilerplate MANIFEST.SKIP file
if one does not already exist.</p>
</li>
<li><a name="manpages"></a><b>manpages</b>
<p>[version 0.28]</p>
<p>This will generate man pages for any binary or library files under
<b>blib/</b> that contain POD.  The man pages will only be installed if the
install paths can be determined from values in <code class="inline"><span class="w">Config</span>.<span class="w">pm</span></code>
.  You can
also supply or override install paths by specifying there values on
the command line with the <code class="inline"><span class="w">bindoc</span></code>
 and <code class="inline"><span class="w">libdoc</span></code>
 installation
targets.</p>
</li>
<li><a name="pardist"></a><b>pardist</b>
<p>[version 0.2806]</p>
<p>Generates a PAR binary distribution for use with <a href="http://search.cpan.org/perldoc/PAR">PAR</a> or <a href="http://search.cpan.org/perldoc/PAR::Dist">PAR::Dist</a>.</p>
<p>It requires that the PAR::Dist module (version 0.17 and up) is
installed on your system.</p>
</li>
<li><a name="ppd"></a><b>ppd</b>
<p>[version 0.20]</p>
<p>Build a PPD file for your distribution.</p>
<p>This action takes an optional argument <code class="inline"><span class="w">codebase</span></code>
 which is used in
the generated PPD file to specify the (usually relative) URL of the
distribution.  By default, this value is the distribution name without
any path information.</p>
<p>Example:</p>
<pre class="verbatim"><ol><li>  ./Build ppd --codebase "MSWin32-x86-multi-thread/Module-Build-0.21.tar.gz"</li></ol></pre></li>
<li><a name="ppmdist"></a><b>ppmdist</b>
<p>[version 0.23]</p>
<p>Generates a PPM binary distribution and a PPD description file.  This
action also invokes the <code class="inline"><span class="w">ppd</span></code>
 action, so it can accept the same
<code class="inline"><span class="w">codebase</span></code>
 argument described under that action.</p>
<p>This uses the same mechanism as the <code class="inline"><span class="w">dist</span></code>
 action to tar &amp; zip its
output, so you can supply <code class="inline"><span class="w">tar</span></code>
 and/or <code class="inline"><span class="w">gzip</span></code>
 parameters to affect
the result.</p>
</li>
<li><a name="prereq_data"></a><b>prereq_data</b>
<p>[version 0.32]</p>
<p>This action prints out a Perl data structure of all prerequisites and the versions
required.  The output can be loaded again using <code class="inline"><a class="l_k" href="../functions/eval.html">eval()</a></code>.  This can be useful for
external tools that wish to query a Build script for prerequisites.</p>
</li>
<li><a name="prereq_report"></a><b>prereq_report</b>
<p>[version 0.28]</p>
<p>This action prints out a list of all prerequisites, the versions required, and
the versions actually installed.  This can be useful for reviewing the
configuration of your system prior to a build, or when compiling data to send
for a bug report.</p>
</li>
<li><a name="pure_install"></a><b>pure_install</b>
<p>[version 0.28]</p>
<p>This action is identical to the <code class="inline"><span class="w">install</span></code>
 action.  In the future,
though, when <code class="inline"><span class="w">install</span></code>
 starts writing to the file
<i>$(INSTALLARCHLIB)/perllocal.pod</i>, <code class="inline"><span class="w">pure_install</span></code>
 won't, and that
will be the only difference between them.</p>
</li>
<li><a name="realclean"></a><b>realclean</b>
<p>[version 0.01]</p>
<p>This action is just like the <code class="inline"><span class="w">clean</span></code>
 action, but also removes the
<code class="inline"><span class="w">_build</span></code>
 directory and the <code class="inline"><span class="w">Build</span></code>
 script.  If you run the
<code class="inline"><span class="w">realclean</span></code>
 action, you are essentially starting over, so you will
have to re-create the <code class="inline"><span class="w">Build</span></code>
 script again.</p>
</li>
<li><a name="retest"></a><b>retest</b>
<p>[version 0.2806]</p>
<p>This is just like the <code class="inline"><span class="w">test</span></code>
 action, but doesn't actually build the
distribution first, and doesn't add <i>blib/</i> to the load path, and
therefore will test against a <i>previously</i> installed version of the
distribution.  This can be used to verify that a certain installed
distribution still works, or to see whether newer versions of a
distribution still pass the old regression tests, and so on.</p>
</li>
<li><a name="skipcheck"></a><b>skipcheck</b>
<p>[version 0.05]</p>
<p>Reports which files are skipped due to the entries in the
<i>MANIFEST.SKIP</i> file (See <a href="http://search.cpan.org/perldoc/manifest">manifest</a> for details)</p>
</li>
<li><a name="test"></a><b>test</b>
<p>[version 0.01]</p>
<p>This will use <code class="inline"><span class="w">Test::Harness</span></code>
 or <code class="inline"><span class="w">TAP::Harness</span></code>
 to run any regression
tests and report their results. Tests can be defined in the standard
places: a file called <code class="inline"><span class="w">test</span>.<span class="w">pl</span></code>
 in the top-level directory, or several
files ending with <code class="inline">.t</code> in a <code class="inline"><span class="w">t</span>/</code>
 directory.</p>
<p>If you want tests to be 'verbose', i.e. show details of test execution
rather than just summary information, pass the argument <code class="inline"><span class="w">verbose</span>=<span class="n">1</span></code>
.</p>
<p>If you want to run tests under the perl debugger, pass the argument
<code class="inline"><span class="w">debugger</span>=<span class="n">1</span></code>
.</p>
<p>If you want to have Module::Build find test files with different file
name extensions, pass the <code class="inline"><span class="w">test_file_exts</span></code>
 argument with an array
of extensions, such as <code class="inline"><span class="s">[</span><span class="q">qw( .t .s .z )</span><span class="s">]</span></code>
.</p>
<p>If you want test to be run by <code class="inline"><span class="w">TAP::Harness</span></code>
, rather than <code class="inline"><span class="w">Test::Harness</span></code>
,
pass the argument <code class="inline"><span class="w">tap_harness_args</span></code>
 as an array reference of arguments to
pass to the TAP::Harness constructor.</p>
<p>In addition, if a file called <code class="inline"><span class="w">visual</span>.<span class="w">pl</span></code>
 exists in the top-level
directory, this file will be executed as a Perl script and its output
will be shown to the user.  This is a good place to put speed tests or
other tests that don't use the <code class="inline"><span class="w">Test::Harness</span></code>
 format for output.</p>
<p>To override the choice of tests to run, you may pass a <code class="inline"><span class="w">test_files</span></code>

argument whose value is a whitespace-separated list of test scripts to
run.  This is especially useful in development, when you only want to
run a single test to see whether you've squashed a certain bug yet:</p>
<pre class="verbatim"><ol><li>  ./Build test --test_files t/something_failing.t</li></ol></pre><p>You may also pass several <code class="inline"><span class="w">test_files</span></code>
 arguments separately:</p>
<pre class="verbatim"><ol><li>  ./Build test --test_files t/one.t --test_files t/two.t</li></ol></pre><p>or use a <code class="inline"><a class="l_k" href="../functions/glob.html">glob()</a></code>-style pattern:</p>
<pre class="verbatim"><ol><li>  ./Build test --test_files 't/01-*.t'</li></ol></pre></li>
<li><a name="testall"></a><b>testall</b>
<p>[version 0.2807]</p>
<p>[Note: the 'testall' action and the code snippets below are currently
in alpha stage, see
<a href="#http%3a%2f%2fwww.nntp.perl.org%2fgroup%2fperl.module.build%2f2007%2f03%2fmsg584.html">http://www.nntp.perl.org/group/perl.module.build/2007/03/msg584.html</a> ]</p>
<p>Runs the <code class="inline"><span class="w">test</span></code>
 action plus each of the <code class="inline"><span class="w">test</span><span class="i">$type</span></code>
 actions defined by
the keys of the <code class="inline"><span class="w">test_types</span></code>
 parameter.</p>
<p>Currently, you need to define the ACTION_test$type method yourself and
enumerate them in the test_types parameter.</p>
<pre class="verbatim"><ol><li>  my $mb = Module::Build-&gt;subclass(</li><li>    code =&gt; q(</li><li>      sub ACTION_testspecial { shift-&gt;generic_test(type =&gt; 'special'); }</li><li>      sub ACTION_testauthor  { shift-&gt;generic_test(type =&gt; 'author'); }</li><li>    )</li><li>  )-&gt;new(</li><li>    ...</li><li>    test_types  =&gt; {</li><li>      special =&gt; '.st',</li><li>      author  =&gt; ['.at', '.pt' ],</li><li>    },</li><li>    ...</li></ol></pre></li>
<li><a name="testcover"></a><b>testcover</b>
<p>[version 0.26]</p>
<p>Runs the <code class="inline"><span class="w">test</span></code>
 action using <code class="inline"><span class="w">Devel::Cover</span></code>
, generating a
code-coverage report showing which parts of the code were actually
exercised during the tests.</p>
<p>To pass options to <code class="inline"><span class="w">Devel::Cover</span></code>
, set the <code class="inline"><span class="i">$DEVEL_COVER_OPTIONS</span></code>

environment variable:</p>
<pre class="verbatim"><ol><li>  DEVEL_COVER_OPTIONS=-ignore,Build ./Build testcover</li></ol></pre></li>
<li><a name="testdb"></a><b>testdb</b>
<p>[version 0.05]</p>
<p>This is a synonym for the 'test' action with the <code class="inline"><span class="w">debugger</span>=<span class="n">1</span></code>

argument.</p>
</li>
<li><a name="testpod"></a><b>testpod</b>
<p>[version 0.25]</p>
<p>This checks all the files described in the <code class="inline"><span class="w">docs</span></code>
 action and
produces <code class="inline"><span class="w">Test::Harness</span></code>
-style output.  If you are a module author,
this is useful to run before creating a new release.</p>
</li>
<li><a name="testpodcoverage"></a><b>testpodcoverage</b>
<p>[version 0.28]</p>
<p>This checks the pod coverage of the distribution and
produces <code class="inline"><span class="w">Test::Harness</span></code>
-style output. If you are a module author,
this is useful to run before creating a new release.</p>
</li>
<li><a name="versioninstall"></a><b>versioninstall</b>
<p>[version 0.16]</p>
<p>** Note: since <code class="inline"><span class="w">only</span>.<span class="w">pm</span></code>
 is so new, and since we just recently added
support for it here too, this feature is to be considered
experimental. **</p>
<p>If you have the <code class="inline"><span class="w">only</span>.<span class="w">pm</span></code>
 module installed on your system, you can
use this action to install a module into the version-specific library
trees.  This means that you can have several versions of the same
module installed and <code class="inline"><a class="l_k" href="../functions/use.html">use</a></code> a specific one like this:</p>
<pre class="verbatim"><ol><li>  <a class="l_k" href="../functions/use.html">use</a> <span class="w">only</span> <span class="w">MyModule</span> <span class="cm">=&gt;</span> <span class="n">0.55</span><span class="sc">;</span></li></ol></pre><p>To override the default installation libraries in <code class="inline"><span class="w">only::config</span></code>
,
specify the <code class="inline"><span class="w">versionlib</span></code>
 parameter when you run the <code class="inline"><span class="w">Build</span>.<span class="w">PL</span></code>
 script:</p>
<pre class="verbatim"><ol><li>  perl Build.PL --versionlib /my/version/place/</li></ol></pre><p>To override which version the module is installed as, specify the
<code class="inline"><span class="w">version</span></code>
 parameter when you run the <code class="inline"><span class="w">Build</span>.<span class="w">PL</span></code>
 script:</p>
<pre class="verbatim"><ol><li>  perl Build.PL --version 0.50</li></ol></pre><p>See the <code class="inline"><span class="w">only</span>.<span class="w">pm</span></code>
 documentation for more information on
version-specific installs.</p>
</li>
</ul>
<a name="OPTIONS"></a><h1>OPTIONS</h1>
<a name="Command-Line-Options"></a><h2>Command Line Options</h2>
<p>The following options can be used during any invocation of <code class="inline"><span class="w">Build</span>.<span class="w">PL</span></code>

or the Build script, during any action.  For information on other
options specific to an action, see the documentation for the
respective action.</p>
<p>NOTE: There is some preliminary support for options to use the more
familiar long option style.  Most options can be preceded with the
<code class="inline">--</code>
 long option prefix, and the underscores changed to dashes
(e.g. <code class="inline">--<a class="l_k" href="../functions/use.html">use</a>-<span class="w">rcfile</span></code>
).  Additionally, the argument to boolean options is
optional, and boolean options can be negated by prefixing them with
<code class="inline"><a class="l_k" href="../functions/no.html">no</a></code> or <code class="inline"><a class="l_k" href="../functions/no.html">no-</a></code> (e.g. <code class="inline">--<span class="w">noverbose</span></code>
 or <code class="inline">--<a class="l_k" href="../functions/no.html">no</a>-<span class="w">verbose</span></code>
).</p>
<ul>
<li><a name="quiet"></a><b>quiet</b>
<p>Suppress informative messages on output.</p>
</li>
<li><a name="verbose"></a><b>verbose</b>
<p>Display extra information about the Build on output.  <code class="inline"><span class="w">verbose</span></code>
 will
turn off <code class="inline"><span class="w">quiet</span></code>
</p>
</li>
<li><a name="cpan_client"></a><b>cpan_client</b>
<p>Sets the <code class="inline"><span class="w">cpan_client</span></code>
 command for use with the <code class="inline"><span class="w">installdeps</span></code>
 action.
See <code class="inline"><span class="w">installdeps</span></code>
 for more details.</p>
</li>
<li><a name="use_rcfile"></a><b>use_rcfile</b>
<p>Load the <i>~/.modulebuildrc</i> option file.  This option can be set to
false to prevent the custom resource file from being loaded.</p>
</li>
<li><a name="allow_mb_mismatch"></a><b>allow_mb_mismatch</b>
<p>Suppresses the check upon startup that the version of Module::Build
we're now running under is the same version that was initially invoked
when building the distribution (i.e. when the <code class="inline"><span class="w">Build</span>.<span class="w">PL</span></code>
 script was
first run).  As of 0.3601, a mismatch results in a warning instead of
a fatal error, so this option effectively just suppresses the warning.</p>
</li>
<li><a name="debug"></a><b>debug</b>
<p>Prints Module::Build debugging information to STDOUT, such as a trace of
executed build actions.</p>
</li>
</ul>
<a name="Default-Options-File-(_.modulebuildrc_)"></a><h2>Default Options File (<i>.modulebuildrc</i>)</h2>
<p>[version 0.28]</p>
<p>When Module::Build starts up, it will look first for a file,
<i>$ENV{HOME}/.modulebuildrc</i>.  If it's not found there, it will look
in the the <i>.modulebuildrc</i> file in the directories referred to by
the environment variables <code class="inline"><span class="w">HOMEDRIVE</span></code>
 + <code class="inline"><span class="w">HOMEDIR</span></code>
, <code class="inline"><span class="w">USERPROFILE</span></code>
,
<code class="inline"><span class="w">APPDATA</span></code>
, <code class="inline"><span class="w">WINDIR</span></code>
, <code class="inline"><span class="w">SYS</span><span class="i">$LOGIN</span></code>
.  If the file exists, the options
specified there will be used as defaults, as if they were typed on the
command line.  The defaults can be overridden by specifying new values
on the command line.</p>
<p>The action name must come at the beginning of the line, followed by any
amount of whitespace and then the options.  Options are given the same
as they would be on the command line.  They can be separated by any
amount of whitespace, including newlines, as long there is whitespace at
the beginning of each continued line.  Anything following a hash mark (<code class="inline"><span class="c">#</span></code>
)
is considered a comment, and is stripped before parsing.  If more than
one line begins with the same action name, those lines are merged into
one set of options.</p>
<p>Besides the regular actions, there are two special pseudo-actions: the
key <code class="inline"><span class="i">*</span></code>
 (asterisk) denotes any global options that should be applied
to all actions, and the key 'Build_PL' specifies options to be applied
when you invoke <code class="inline"><span class="w">perl</span> <span class="w">Build</span>.<span class="w">PL</span></code>
.</p>
<pre class="verbatim"><ol><li>  *           verbose=1   # global options</li><li>  diff        flags=-u</li><li>  install     --install_base /home/ken</li><li>              --install_path html=/home/ken/docs/html</li><li>  installdeps --cpan_client 'cpanp -i'</li></ol></pre><p>If you wish to locate your resource file in a different location, you
can set the environment variable <code class="inline"><span class="w">MODULEBUILDRC</span></code>
 to the complete
absolute path of the file containing your options.</p>
<a name="Environment-variables"></a><h2>Environment variables</h2>
<ul>
<li><a name="MODULEBUILDRC"></a><b>MODULEBUILDRC</b>
<p>[version 0.28]</p>
<p>Specifies an alternate location for a default options file as described above.</p>
</li>
<li><a name="PERL_MB_OPT"></a><b>PERL_MB_OPT</b>
<p>[version 0.36]</p>
<p>Command line options that are applied to Build.PL or any Build action.  The
string is split as the shell would (e.g. whitespace) and the result is
prepended to any actual command-line arguments.</p>
</li>
</ul>
<a name="INSTALL-PATHS"></a><h1>INSTALL PATHS</h1>
<p>[version 0.19]</p>
<p>When you invoke Module::Build's <code class="inline"><span class="w">build</span></code>
 action, it needs to figure
out where to install things.  The nutshell version of how this works
is that default installation locations are determined from
<i>Config.pm</i>, and they may be overridden by using the <code class="inline"><span class="w">install_path</span></code>

parameter.  An <code class="inline"><span class="w">install_base</span></code>
 parameter lets you specify an
alternative installation root like <i>/home/foo</i>, and a <code class="inline"><span class="w">destdir</span></code>
 lets
you specify a temporary installation directory like <i>/tmp/install</i> in
case you want to create bundled-up installable packages.</p>
<p>Natively, Module::Build provides default installation locations for
the following types of installable items:</p>
<ul>
<li><a name="lib"></a><b>lib</b>
<p>Usually pure-Perl module files ending in <i>.pm</i>.</p>
</li>
<li><a name="arch"></a><b>arch</b>
<p>"Architecture-dependent" module files, usually produced by compiling
XS, <a href="http://search.cpan.org/perldoc/Inline">Inline</a>, or similar code.</p>
</li>
<li><a name="script"></a><b>script</b>
<p>Programs written in pure Perl.  In order to improve reuse, try to make
these as small as possible - put the code into modules whenever
possible.</p>
</li>
<li><a name="bin"></a><b>bin</b>
<p>"Architecture-dependent" executable programs, i.e. compiled C code or
something.  Pretty rare to see this in a perl distribution, but it
happens.</p>
</li>
<li><a name="bindoc"></a><b>bindoc</b>
<p>Documentation for the stuff in <code class="inline"><span class="w">script</span></code>
 and <code class="inline"><span class="w">bin</span></code>
.  Usually
generated from the POD in those files.  Under Unix, these are manual
pages belonging to the 'man1' category.</p>
</li>
<li><a name="libdoc"></a><b>libdoc</b>
<p>Documentation for the stuff in <code class="inline"><span class="w">lib</span></code>
 and <code class="inline"><span class="w">arch</span></code>
.  This is usually
generated from the POD in <i>.pm</i> files.  Under Unix, these are manual
pages belonging to the 'man3' category.</p>
</li>
<li><a name="binhtml"></a><b>binhtml</b>
<p>This is the same as <code class="inline"><span class="w">bindoc</span></code>
 above, but applies to HTML documents.</p>
</li>
<li><a name="libhtml"></a><b>libhtml</b>
<p>This is the same as <code class="inline"><span class="w">libdoc</span></code>
 above, but applies to HTML documents.</p>
</li>
</ul>
<p>Four other parameters let you control various aspects of how
installation paths are determined:</p>
<ul>
<li><a name="installdirs"></a><b>installdirs</b>
<p>The default destinations for these installable things come from
entries in your system's <code class="inline"><span class="w">Config</span>.<span class="w">pm</span></code>
.  You can select from three
different sets of default locations by setting the <code class="inline"><span class="w">installdirs</span></code>

parameter as follows:</p>
<pre class="verbatim"><ol><li>                          'installdirs' set to:</li><li>                   core          site                vendor</li><li></li><li>              uses the following defaults from Config.pm:</li><li></li><li>  lib     =&gt; installprivlib  installsitelib      installvendorlib</li><li>  arch    =&gt; installarchlib  installsitearch     installvendorarch</li><li>  script  =&gt; installscript   installsitebin      installvendorbin</li><li>  bin     =&gt; installbin      installsitebin      installvendorbin</li><li>  bindoc  =&gt; installman1dir  installsiteman1dir  installvendorman1dir</li><li>  libdoc  =&gt; installman3dir  installsiteman3dir  installvendorman3dir</li><li>  binhtml =&gt; installhtml1dir installsitehtml1dir installvendorhtml1dir [*]</li><li>  libhtml =&gt; installhtml3dir installsitehtml3dir installvendorhtml3dir [*]</li><li></li><li>  * Under some OS (eg. MSWin32) the destination for HTML documents is</li><li>    determined by the C&lt;Config.pm&gt; entry C&lt;installhtmldir&gt;.</li></ol></pre><p>The default value of <code class="inline"><span class="w">installdirs</span></code>
 is "site".  If you're creating
vendor distributions of module packages, you may want to do something
like this:</p>
<pre class="verbatim"><ol><li>  perl Build.PL --installdirs vendor</li></ol></pre><p>or</p>
<pre class="verbatim"><ol><li>  ./Build install --installdirs vendor</li></ol></pre><p>If you're installing an updated version of a module that was included
with perl itself (i.e. a "core module"), then you may set
<code class="inline"><span class="w">installdirs</span></code>
 to "core" to overwrite the module in its present
location.</p>
<p>(Note that the 'script' line is different from <code class="inline"><span class="w">MakeMaker</span></code>
 -
unfortunately there's no such thing as "installsitescript" or
"installvendorscript" entry in <code class="inline"><span class="w">Config</span>.<span class="w">pm</span></code>
, so we use the
"installsitebin" and "installvendorbin" entries to at least get the
general location right.  In the future, if <code class="inline"><span class="w">Config</span>.<span class="w">pm</span></code>
 adds some more
appropriate entries, we'll start using those.)</p>
</li>
<li><a name="install_path"></a><b>install_path</b>
<p>Once the defaults have been set, you can override them.</p>
<p>On the command line, that would look like this:</p>
<pre class="verbatim"><ol><li>  perl Build.PL --install_path lib=/foo/lib --install_path arch=/foo/lib/arch</li></ol></pre><p>or this:</p>
<pre class="verbatim"><ol><li>  ./Build install --install_path lib=/foo/lib --install_path arch=/foo/lib/arch</li></ol></pre></li>
<li><a name="install_base"></a><b>install_base</b>
<p>You can also set the whole bunch of installation paths by supplying the
<code class="inline"><span class="w">install_base</span></code>
 parameter to point to a directory on your system.  For
instance, if you set <code class="inline"><span class="w">install_base</span></code>
 to "/home/ken" on a Linux
system, you'll install as follows:</p>
<pre class="verbatim"><ol><li>  lib     =&gt; /home/ken/lib/perl5</li><li>  arch    =&gt; /home/ken/lib/perl5/i386-linux</li><li>  script  =&gt; /home/ken/bin</li><li>  bin     =&gt; /home/ken/bin</li><li>  bindoc  =&gt; /home/ken/man/man1</li><li>  libdoc  =&gt; /home/ken/man/man3</li><li>  binhtml =&gt; /home/ken/html</li><li>  libhtml =&gt; /home/ken/html</li></ol></pre><p>Note that this is <i>different</i> from how <code class="inline"><span class="w">MakeMaker</span></code>
's <code class="inline"><span class="w">PREFIX</span></code>

parameter works.  <code class="inline"><span class="w">install_base</span></code>
 just gives you a default layout under the
directory you specify, which may have little to do with the
<code class="inline"><span class="w">installdirs</span>=<span class="w">site</span></code>
 layout.</p>
<p>The exact layout under the directory you specify may vary by system -
we try to do the "sensible" thing on each platform.</p>
</li>
<li><a name="destdir"></a><b>destdir</b>
<p>If you want to install everything into a temporary directory first
(for instance, if you want to create a directory tree that a package
manager like <code class="inline"><span class="w">rpm</span></code>
 or <code class="inline"><span class="w">dpkg</span></code>
 could create a package from), you can
use the <code class="inline"><span class="w">destdir</span></code>
 parameter:</p>
<pre class="verbatim"><ol><li>  perl Build.PL --destdir /tmp/foo</li></ol></pre><p>or</p>
<pre class="verbatim"><ol><li>  ./Build install --destdir /tmp/foo</li></ol></pre><p>This will effectively install to "/tmp/foo/$sitelib",
"/tmp/foo/$sitearch", and the like, except that it will use
<code class="inline"><span class="w">File::Spec</span></code>
 to make the pathnames work correctly on whatever
platform you're installing on.</p>
</li>
<li><a name="prefix"></a><b>prefix</b>
<p>Provided for compatibility with <code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
's PREFIX argument.
<code class="inline"><span class="w">prefix</span></code>
 should be used when you wish Module::Build to install your
modules, documentation and scripts in the same place
<code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
 does.</p>
<p>The following are equivalent.</p>
<pre class="verbatim"><ol><li>    perl Build.PL --prefix /tmp/foo</li><li>    perl Makefile.PL PREFIX=/tmp/foo</li></ol></pre><p>Because of the very complex nature of the prefixification logic, the
behavior of PREFIX in <code class="inline"><span class="w">MakeMaker</span></code>
 has changed subtly over time.
Module::Build's --prefix logic is equivalent to the PREFIX logic found
in <code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
 6.30.</p>
<p>If you do not need to retain compatibility with <code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
 or
are starting a fresh Perl installation we recommend you use
<code class="inline"><span class="w">install_base</span></code>
 instead (and <code class="inline"><span class="w">INSTALL_BASE</span></code>
 in <code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
).
See <a href="../Module/Build/Cookbook.html#Instaling-in-the-same-location-as-ExtUtils%3a%3aMakeMaker">Instaling in the same location as ExtUtils::MakeMaker in Module::Build::Cookbook</a> for further information.</p>
</li>
</ul>
<a name="MOTIVATIONS"></a><h1>MOTIVATIONS</h1>
<p>There are several reasons I wanted to start over, and not just fix
what I didn't like about <code class="inline"><span class="w">MakeMaker</span></code>
:</p>
<ul>
<li>
<p>I don't like the core idea of <code class="inline"><span class="w">MakeMaker</span></code>
, namely that <code class="inline"><span class="w">make</span></code>
 should be
involved in the build process.  Here are my reasons:</p>
<ul>
<li><a name="%2b"></a><b>+</b>
<p>When a person is installing a Perl module, what can you assume about
their environment?  Can you assume they have <code class="inline"><span class="w">make</span></code>
?  No, but you can
assume they have some version of Perl.</p>
</li>
<li><a name="%2b"></a><b>+</b>
<p>When a person is writing a Perl module for intended distribution, can
you assume that they know how to build a Makefile, so they can
customize their build process?  No, but you can assume they know Perl,
and could customize that way.</p>
</li>
</ul>
<p>For years, these things have been a barrier to people getting the
build/install process to do what they want.</p>
</li>
<li>
<p>There are several architectural decisions in <code class="inline"><span class="w">MakeMaker</span></code>
 that make it
very difficult to customize its behavior.  For instance, when using
<code class="inline"><span class="w">MakeMaker</span></code>
 you do <code class="inline"><a class="l_k" href="../functions/use.html">use</a> <span class="w">ExtUtils::MakeMaker</span></code>
, but the object created in
<code class="inline"><span class="i">WriteMakefile</span><span class="s">(</span><span class="s">)</span></code>
 is actually blessed into a package name that's
created on the fly, so you can't simply subclass
<code class="inline"><span class="w">ExtUtils::MakeMaker</span></code>
.  There is a workaround <code class="inline"><span class="w">MY</span></code>
 package that lets
you override certain <code class="inline"><span class="w">MakeMaker</span></code>
 methods, but only certain explicitly
preselected (by <code class="inline"><span class="w">MakeMaker</span></code>
) methods can be overridden.  Also, the method
of customization is very crude: you have to modify a string containing
the Makefile text for the particular target.  Since these strings
aren't documented, and <i>can't</i> be documented (they take on different
values depending on the platform, version of perl, version of
<code class="inline"><span class="w">MakeMaker</span></code>
, etc.), you have no guarantee that your modifications will
work on someone else's machine or after an upgrade of <code class="inline"><span class="w">MakeMaker</span></code>
 or
perl.</p>
</li>
<li>
<p>It is risky to make major changes to <code class="inline"><span class="w">MakeMaker</span></code>
, since it does so many
things, is so important, and generally works.  <code class="inline"><span class="w">Module::Build</span></code>
 is an
entirely separate package so that I can work on it all I want, without
worrying about backward compatibility.</p>
</li>
<li>
<p>Finally, Perl is said to be a language for system administration.
Could it really be the case that Perl isn't up to the task of building
and installing software?  Even if that software is a bunch of stupid
little <code class="inline">.pm</code> files that just need to be copied from one place to
another?  My sense was that we could design a system to accomplish
this in a flexible, extensible, and friendly manner.  Or die trying.</p>
</li>
</ul>
<a name="TO-DO"></a><h1>TO DO</h1>
<p>The current method of relying on time stamps to determine whether a
derived file is out of date isn't likely to scale well, since it
requires tracing all dependencies backward, it runs into problems on
NFS, and it's just generally flimsy.  It would be better to use an MD5
signature or the like, if available.  See <code class="inline"><span class="w">cons</span></code>
 for an example.</p>
<pre class="verbatim"><ol><li> - append to perllocal.pod</li><li> - add a 'plugin' functionality</li></ol></pre><a name="AUTHOR"></a><h1>AUTHOR</h1>
<p>Ken Williams &lt;kwilliams@cpan.org&gt;</p>
<p>Development questions, bug reports, and patches should be sent to the
Module-Build mailing list at &lt;module-build@perl.org&gt;.</p>
<p>Bug reports are also welcome at
&lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html?Dist=Module-Build">http://rt.cpan.org/NoAuth/Bugs.html?Dist=Module-Build</a>&gt;.</p>
<p>The latest development version is available from the Git
repository at &lt;https://github.com/dagolden/module-build/&gt;</p>
<a name="COPYRIGHT"></a><h1>COPYRIGHT</h1>
<p>Copyright (c) 2001-2006 Ken Williams.  All rights reserved.</p>
<p>This library is free software; you can redistribute it and/or
modify it under the same terms as Perl itself.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p>perl(1), <a href="../Module/Build/Cookbook.html">Module::Build::Cookbook</a>, <a href="../Module/Build/Authoring.html">Module::Build::Authoring</a>,
<a href="../Module/Build/API.html">Module::Build::API</a>, <a href="../ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a></p>
<p><i>META.yml</i> Specification:
<a href="../CPAN/Meta/Spec.html">CPAN::Meta::Spec</a></p>
<p><a href="http://www.dsmit.com/cons/">http://www.dsmit.com/cons/</a></p>
<p><a href="http://search.cpan.org/dist/PerlBuildSystem/">http://search.cpan.org/dist/PerlBuildSystem/</a></p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#GUIDE-TO-DOCUMENTATION">GUIDE TO DOCUMENTATION</a><li><a href="#ACTIONS">ACTIONS</a><li><a href="#OPTIONS">OPTIONS</a><ul><li><a href="#Command-Line-Options">Command Line Options</a><li><a href="#Default-Options-File-(_.modulebuildrc_)">Default Options File (_.modulebuildrc_)</a><li><a href="#Environment-variables">Environment variables</a></ul><li><a href="#INSTALL-PATHS">INSTALL PATHS</a><li><a href="#MOTIVATIONS">MOTIVATIONS</a><li><a href="#TO-DO">TO DO</a><li><a href="#AUTHOR">AUTHOR</a><li><a href="#COPYRIGHT">COPYRIGHT</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="http://perl.jonallen.info">Jon Allen (JJ)</a><br>
	      See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for more details
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="../index-overview.html">Overview</a>
                <li><a href="../index-tutorials.html">Tutorials</a>
                <li><a href="../index-faq.html">FAQs</a>
                <li><a href="../index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="../index-language.html">Language</a>
                <li><a href="../index-functions.html">Functions</a>
                <li><a href="../perlop.html">Operators</a>
                <li><a href="../perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="../index-modules-A.html">Modules</a>
                <li><a href="../index-pragmas.html">Pragmas</a>
                <li><a href="../index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="../index-licence.html">License</a>
                <li><a href="../index-internals.html">Internals</a>
                <li><a href="../index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="../static/exploreperl.js"></script>
      <script language="JavaScript" src="../static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(1);
  perldoc.pageName    = 'Module::Build';
  perldoc.pageAddress = 'Module/Build.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
