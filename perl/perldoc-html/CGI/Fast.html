<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>CGI::Fast - perldoc.perl.org</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta http-equiv="Content-Language" content="en-gb">
  <link rel="search" type="application/opensearchdescription+xml" title="Search perldoc.perl.org" href="/static/search.xml"/>
  <link href="../static/css-20100830.css" rel="stylesheet" rev="stylesheet" type="text/css" media="screen">
  <link href="../static/exploreperl.css" rel="stylesheet" rev="stylesheet" type="text/css">
</head>

<body onLoad="perldoc.startup();" onPageShow="if (event.persisted) perldoc.startup();">
    <div id="page">
      
      <div id="header">
	<div id="homepage_link">
	  <a href="../index.html"></a>
	</div>
	<div id="strapline">
	  Perl Programming Documentation
	</div>
	<div id="download_link" class="download">
	  <a href="http://www.perl.org/get.html">Download Perl</a>
	</div>
	<div id="explore_link" class="download">
	  <a id="explore_anchor" href="#">Explore</a>
	</div>
      </div>
      
      <div id="body">
        <div id="left_column">
          <div class="side_group">
            
	    <div class="side_panel doc_panel">
              <p>Manual</p>
              <ul>
                <li><a href="../index-overview.html">Overview</a>
                <li><a href="../index-tutorials.html">Tutorials</a>
                <li><a href="../index-faq.html">FAQs</a>
                <li><a href="../index-history.html">History / Changes</a>
                <li><a href="../index-licence.html">License</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Reference</p>
              <ul>
                <li><a href="../index-language.html">Language</a>
                <li><a href="../index-functions.html">Functions</a>
                <li><a href="../perlop.html">Operators</a>
                <li><a href="../perlvar.html">Special Variables</a>
                <li><a href="../index-pragmas.html">Pragmas</a>
                <li><a href="../index-utilities.html">Utilities</a>
                <li><a href="../index-internals.html">Internals</a>
                <li><a href="../index-platforms.html">Platform Specific</a>
              </ul>
            </div>
            <div class="side_panel doc_panel">
              <p>Modules</p>
              <ul>
		<li>
		
                
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		    
		  
		
                  
		
                  
		
                  
		    
		  
		
                  
		
                  
		
		
                    <a href="../index-modules-A.html">A</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-B.html">B</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-C.html">C</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-D.html">D</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-E.html">E</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="../index-modules-F.html">F</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-G.html">G</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-H.html">H</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-I.html">I</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-L.html">L</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="../index-modules-M.html">M</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-N.html">N</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-O.html">O</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-P.html">P</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-S.html">S</a>
                    
                      
                        <li>
                      
                    
                
                    <a href="../index-modules-T.html">T</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-U.html">U</a>
                    
                      
                        &bull;
                      
                    
                
                    <a href="../index-modules-X.html">X</a>
                    
                
              </ul>
            </div>
            
	      <div class="side_panel doc_panel">
		<p>Tools</p>
		<ul>
		  <li><a href="../preferences.html">Preferences</a>
		</ul>
	      </div>
            
          </div>
        </div>
        <div id="centre_column">
          <div id="content_header">
            <div id="title_bar">
              <div id="page_name">
                <h1>CGI::Fast</h1>
              </div>
              <div id="perl_version">
                Perl 5 version 16.0 documentation
              </div>
              <div class="page_links" id="page_links_top">
                <a href="#" onClick="toolbar.goToTop();return false;">Go to top</a>
		
              </div>
	      <div class="page_links" id="page_links_bottom">
		
                  <a href="#" id="page_index_toggle">Show page index</a> &bull;
		
                <a href="#" id="recent_pages_toggle">Show recent pages</a>		
	      </div>
	      <div id="search_form">
		<form action="../search.html" method="GET" id="search">
		  <input type="text" name="q" id="search_box" alt="Search">
		</form>
	      </div>
            </div>
            <div id="breadcrumbs">
                
    <a href="../index.html">Home</a> &gt;
    
      
        <a href="../index-modules-C.html">Core modules (C)</a> &gt;
      
    
    CGI::Fast
  

            </div>
          </div>
          <div id="content_body">
	    <!--[if lt IE 7]>
 <div class="noscript">
   <p>
     <strong>It looks like you're using Internet Explorer 6. This is a very old
     browser which does not offer full support for modern websites.</strong>
   </p>
   <p>
     Unfortunately this means that this website will not work on
     your computer.
   </p>
   <p>
     Don't miss out though! To view the site (and get a better experience from
     many other websites), simply upgrade to
     <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet
Explorer 8</a>
     or download an alternative browser such as
     <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>,
     <a href="http://www.apple.com/safari/download/">Safari</a>, or
     <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
   </p>
   <p>
     All of these browsers are free. If you're using a PC at work, you may
     need to contact your IT administrator.
   </p>
 </div>
<![endif]-->
	    <noscript>
	      <div class="noscript">
	      <p>
                <strong>Please note: Many features of this site require JavaScript. You appear to have JavaScript disabled,
	        or are running a non-JavaScript capable web browser.</strong>
	      </p>
	      <p>
		To get the best experience, please enable JavaScript or download a modern web browser such as <a href="http://www.microsoft.com/windows/Internet-explorer/default.aspx">Internet Explorer 8</a>, <a href="http://www.mozilla.com/en-US/firefox/firefox.html">Firefox</a>, <a href="http://www.apple.com/safari/download/">Safari</a>, or <a href="http://www.google.co.uk/chrome">Google Chrome</a>.
              </p>
	      </div>
	    </noscript>

	    <div id="recent_pages" class="hud_container">
	      <div id="recent_pages_header" class="hud_header">
		<div id="recent_pages_close" class="hud_close"><a href="#" onClick="recentPages.hide();return false;"></a></div>
		<div id="recent_pages_title" class="hud_title"><span class="hud_span_top">Recently read</span></div>
		<div id="recent_pages_topright" class="hud_topright"></div>
	      </div>
	      <div id="recent_pages_content" class="hud_content">
	      </div>
	      <div id="recent_pages_footer" class="hud_footer">
		<div id="recent_pages_bottomleft" class="hud_bottomleft"></div>
		<div id="recent_pages_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
		<div id="recent_pages_resize" class="hud_resize"></div>
	      </div>
	    </div>
  
	    <div id="from_search"></div>
            <h1>CGI::Fast</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#OTHER-PIECES-OF-THE-PUZZLE">OTHER PIECES OF THE PUZZLE</a><li><a href="#WRITING-FASTCGI-PERL-SCRIPTS">WRITING FASTCGI PERL SCRIPTS</a><li><a href="#INSTALLING-FASTCGI-SCRIPTS">INSTALLING FASTCGI SCRIPTS</a><li><a href="#USING-FASTCGI-SCRIPTS-AS-CGI-SCRIPTS">USING FASTCGI SCRIPTS AS CGI SCRIPTS</a><li><a href="#EXTERNAL-FASTCGI-SERVER-INVOCATION">EXTERNAL FASTCGI SERVER INVOCATION</a><li><a href="#CAVEATS">CAVEATS</a><li><a href="#AUTHOR-INFORMATION">AUTHOR INFORMATION</a><li><a href="#BUGS">BUGS</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul><a name="NAME"></a><h1>NAME</h1>
<p>CGI::Fast - CGI Interface for Fast CGI</p>
<a name="SYNOPSIS"></a><h1>SYNOPSIS</h1>
<pre class="verbatim"><ol><li>    <a class="l_k" href="../functions/use.html">use</a> <span class="w">CGI::Fast</span> <span class="q">qw(:standard)</span><span class="sc">;</span></li><li>    <span class="i">$COUNTER</span> = <span class="n">0</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="w">new</span> <span class="w">CGI::Fast</span><span class="s">)</span> <span class="s">{</span></li><li>	<a class="l_k" href="../functions/print.html">print</a> <span class="i">header</span><span class="sc">;</span></li><li>	<a class="l_k" href="../functions/print.html">print</a> <span class="i">start_html</span><span class="s">(</span><span class="q">&quot;Fast CGI Rocks&quot;</span><span class="s">)</span><span class="sc">;</span></li><li>	<a class="l_k" href="../functions/print.html">print</a></li><li>	    <span class="i">h1</span><span class="s">(</span><span class="q">&quot;Fast CGI Rocks&quot;</span><span class="s">)</span><span class="cm">,</span></li><li>	    <span class="q">&quot;Invocation number &quot;</span><span class="cm">,</span><span class="i">b</span><span class="s">(</span><span class="i">$COUNTER</span>++<span class="s">)</span><span class="cm">,</span></li><li>            <span class="q">&quot; PID &quot;</span><span class="cm">,</span><span class="i">b</span><span class="s">(</span><span class="i">$$</span><span class="s">)</span><span class="cm">,</span><span class="q">&quot;.&quot;</span><span class="cm">,</span></li><li>	    <span class="w">hr</span><span class="sc">;</span></li><li>        <a class="l_k" href="../functions/print.html">print</a> <span class="i">end_html</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a name="DESCRIPTION"></a><h1>DESCRIPTION</h1>
<p>CGI::Fast is a subclass of the CGI object created by CGI.pm.  It is
specialized to work well FCGI module, which greatly speeds up CGI
scripts by turning them into persistently running server processes.
Scripts that perform time-consuming initialization processes, such as
loading large modules or opening persistent database connections, will
see large performance improvements.</p>
<a name="OTHER-PIECES-OF-THE-PUZZLE"></a><h1>OTHER PIECES OF THE PUZZLE</h1>
<p>In order to use CGI::Fast you'll need the FCGI module.  See
<a href="http://www.cpan.org/">http://www.cpan.org/</a> for details.</p>
<a name="WRITING-FASTCGI-PERL-SCRIPTS"></a><h1>WRITING FASTCGI PERL SCRIPTS</h1>
<p>FastCGI scripts are persistent: one or more copies of the script
are started up when the server initializes, and stay around until
the server exits or they die a natural death.  After performing
whatever one-time initialization it needs, the script enters a
loop waiting for incoming connections, processing the request, and
waiting some more.</p>
<p>A typical FastCGI script will look like this:</p>
<pre class="verbatim"><ol><li>    <span class="c">#!/usr/bin/perl</span></li><li>    <a class="l_k" href="../functions/use.html">use</a> <span class="w">CGI::Fast</span><span class="sc">;</span></li><li>    <span class="i">&amp;do_some_initialization</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="i">$q</span> = <span class="w">new</span> <span class="w">CGI::Fast</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="i">&amp;process_request</span><span class="s">(</span><span class="i">$q</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Each time there's a new request, CGI::Fast returns a
CGI object to your loop.  The rest of the time your script
waits in the call to new().  When the server requests that
your script be terminated, new() will return undef.  You can
of course exit earlier if you choose.  A new version of the
script will be respawned to take its place (this may be
necessary in order to avoid Perl memory leaks in long-running
scripts).</p>
<p>CGI.pm's default CGI object mode also works.  Just modify the loop
this way:</p>
<pre class="verbatim"><ol><li>    while <span class="s">(</span><span class="w">new</span> <span class="w">CGI::Fast</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="i">&amp;process_request</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><p>Calls to header(), start_form(), etc. will all operate on the
current request.</p>
<a name="INSTALLING-FASTCGI-SCRIPTS"></a><h1>INSTALLING FASTCGI SCRIPTS</h1>
<p>See the FastCGI developer's kit documentation for full details.  On
the Apache server, the following line must be added to srm.conf:</p>
<pre class="verbatim"><ol><li>    <span class="w">AddType</span> <span class="w">application</span>/<span class="w">x</span>-<span class="w">httpd</span>-<span class="w">fcgi</span> .<span class="w">fcgi</span></li></ol></pre><p>FastCGI scripts must end in the extension .fcgi.  For each script you
install, you must add something like the following to srm.conf:</p>
<pre class="verbatim"><ol><li>    <span class="w">FastCgiServer</span> /<span class="w">usr</span>/<span class="w">etc</span>/<span class="w">httpd</span>/<span class="w">fcgi</span>-<span class="w">bin</span>/<span class="w">file_upload</span>.<span class="w">fcgi</span> -<span class="w">processes</span> <span class="n">2</span></li></ol></pre><p>This instructs Apache to launch two copies of file_upload.fcgi at
startup time.</p>
<a name="USING-FASTCGI-SCRIPTS-AS-CGI-SCRIPTS"></a><h1>USING FASTCGI SCRIPTS AS CGI SCRIPTS</h1>
<p>Any script that works correctly as a FastCGI script will also work
correctly when installed as a vanilla CGI script.  However it will
not see any performance benefit.</p>
<a name="EXTERNAL-FASTCGI-SERVER-INVOCATION"></a><h1>EXTERNAL FASTCGI SERVER INVOCATION</h1>
<p>FastCGI supports a TCP/IP transport mechanism which allows FastCGI scripts to run
external to the webserver, perhaps on a remote machine.  To configure the
webserver to connect to an external FastCGI server, you would add the following
to your srm.conf:</p>
<pre class="verbatim"><ol><li>    FastCgiExternalServer /usr/etc/httpd/fcgi-bin/file_upload.fcgi -host sputnik:8888</li></ol></pre><p>Two environment variables affect how the <code class="inline"><span class="w">CGI::Fast</span></code>
 object is created,
allowing <code class="inline"><span class="w">CGI::Fast</span></code>
 to be used as an external FastCGI server.  (See <code class="inline"><span class="w">FCGI</span></code>

documentation for <code class="inline"><span class="w">FCGI::OpenSocket</span></code>
 for more information.)</p>
<ul>
<li><a name="FCGI_SOCKET_PATH"></a><b>FCGI_SOCKET_PATH</b>
<p>The address (TCP/IP) or path (UNIX Domain) of the socket the external FastCGI
script to which bind an listen for incoming connections from the web server.</p>
</li>
<li><a name="FCGI_LISTEN_QUEUE"></a><b>FCGI_LISTEN_QUEUE</b>
<p>Maximum length of the queue of pending connections.</p>
</li>
</ul>
<p>For example:</p>
<pre class="verbatim"><ol><li>    <span class="c">#!/usr/local/bin/perl    # must be a FastCGI version of perl!</span></li><li>    <a class="l_k" href="../functions/use.html">use</a> <span class="w">CGI::Fast</span><span class="sc">;</span></li><li>    <span class="i">&amp;do_some_initialization</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="i">$ENV</span>{<span class="w">FCGI_SOCKET_PATH</span>} = <span class="q">&quot;sputnik:8888&quot;</span><span class="sc">;</span></li><li>    <span class="i">$ENV</span>{<span class="w">FCGI_LISTEN_QUEUE</span>} = <span class="n">100</span><span class="sc">;</span></li><li>    while <span class="s">(</span><span class="i">$q</span> = <span class="w">new</span> <span class="w">CGI::Fast</span><span class="s">)</span> <span class="s">{</span></li><li>	<span class="i">&amp;process_request</span><span class="s">(</span><span class="i">$q</span><span class="s">)</span><span class="sc">;</span></li><li>    <span class="s">}</span></li></ol></pre><a name="CAVEATS"></a><h1>CAVEATS</h1>
<p>I haven't tested this very much.</p>
<a name="AUTHOR-INFORMATION"></a><h1>AUTHOR INFORMATION</h1>
<p>Copyright 1996-1998, Lincoln D. Stein.  All rights reserved.</p>
<p>This library is free software; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>
<p>Address bug reports and comments to: lstein@cshl.org</p>
<a name="BUGS"></a><h1>BUGS</h1>
<p>This section intentionally left blank.</p>
<a name="SEE-ALSO"></a><h1>SEE ALSO</h1>
<p><a href="../CGI/Carp.html">CGI::Carp</a>, <a href="../CGI.html">CGI</a></p>




  <div id="page_index" class="hud_container">
    <div id="page_index_header" class="hud_header">
      <div id="page_index_close" class="hud_close"><a href="#" onClick="pageIndex.hide();return false;"></a></div>
      <div id="page_index_title" class="hud_title"><span class="hud_span_top">Page index</span></div>
      <div id="page_index_topright" class="hud_topright"></div>
    </div>
    <div id="page_index_content" class="hud_content">
      <ul><li><a href="#NAME">NAME</a><li><a href="#SYNOPSIS">SYNOPSIS</a><li><a href="#DESCRIPTION">DESCRIPTION</a><li><a href="#OTHER-PIECES-OF-THE-PUZZLE">OTHER PIECES OF THE PUZZLE</a><li><a href="#WRITING-FASTCGI-PERL-SCRIPTS">WRITING FASTCGI PERL SCRIPTS</a><li><a href="#INSTALLING-FASTCGI-SCRIPTS">INSTALLING FASTCGI SCRIPTS</a><li><a href="#USING-FASTCGI-SCRIPTS-AS-CGI-SCRIPTS">USING FASTCGI SCRIPTS AS CGI SCRIPTS</a><li><a href="#EXTERNAL-FASTCGI-SERVER-INVOCATION">EXTERNAL FASTCGI SERVER INVOCATION</a><li><a href="#CAVEATS">CAVEATS</a><li><a href="#AUTHOR-INFORMATION">AUTHOR INFORMATION</a><li><a href="#BUGS">BUGS</a><li><a href="#SEE-ALSO">SEE ALSO</a></ul>
    </div>
    <div id="page_index_footer" class="hud_footer">
      <div id="page_index_bottomleft" class="hud_bottomleft"></div>
      <div id="page_index_bottom" class="hud_bottom"><span class="hud_span_bottom"></span></div>
      <div id="page_index_resize" class="hud_resize"></div>
    </div>
  </div>


	    &nbsp;
          </div>
          <div id="content_footer">
          </div>
        </div>
        <div class="clear"></div>
      </div>
      
    <div id="footer">
      <div id="footer_content">
        <div id="footer_strapline">
          perldoc.perl.org - Official documentation for the Perl programming language
        </div>
        <div id="footer_links">
          <div id="address">
            <p class="name">Contact details</p>
            <p class="address">
	      Site maintained by <a href="http://perl.jonallen.info">Jon Allen (JJ)</a><br>
	      See the <a href="http://perl.jonallen.info/projects/perldoc">project page</a> for more details
	    </p>
            <p class="contact">
              Documentation maintained by the <a href="http://lists.cpan.org/showlist.cgi?name=perl5-porters">Perl 5 Porters</a>
            </p>
          </div>
          <ul class="f1">
            <li>Manual
              <ul class="f2">
                <li><a href="../index-overview.html">Overview</a>
                <li><a href="../index-tutorials.html">Tutorials</a>
                <li><a href="../index-faq.html">FAQs</a>
                <li><a href="../index-history.html">Changes</a>
              </ul>
            <li>Reference
              <ul class="f2">
                <li><a href="../index-language.html">Language</a>
                <li><a href="../index-functions.html">Functions</a>
                <li><a href="../perlop.html">Operators</a>
                <li><a href="../perlvar.html">Variables</a>
              </ul>
            <li>Modules
              <ul class="f2">
                <li><a href="../index-modules-A.html">Modules</a>
                <li><a href="../index-pragmas.html">Pragmas</a>
                <li><a href="../index-utilities.html">Utilities</a>
              </ul>
            <li>Misc
              <ul class="f2">
                <li><a href="../index-licence.html">License</a>
                <li><a href="../index-internals.html">Internals</a>
                <li><a href="../index-platforms.html">Platforms</a>
              </ul>          </ul>
          <div class="clear"></div>
        </div>
      </div>
      <div id="footer_end">
      </div>
    </div>
      
    </div>
      <script language="JavaScript" type="text/javascript" src="../static/exploreperl.js"></script>
      <script language="JavaScript" src="../static/combined-20100403.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
  perldoc.setPath(1);
  perldoc.pageName    = 'CGI::Fast';
  perldoc.pageAddress = 'CGI/Fast.html';
  perldoc.contentPage = 1;
  explorePerl.render();
  explorePerl.addEvents('explore_anchor');
</script>
    
  </body>
</html>
